require ("Class")
local util = require("Util")


local  x = class("x")
function x:ctor(name,age) 
	self.age=age
	self.name=name
end
function x:Say( what )
 	print("Say".."   "..self.name.."   "..self.age.." Say:"..what)
end




local delgate =Delgate()
function BindUpdate()
	CS.IFramework.Framework.BindEnvUpdate(Update, CS.IFramework.EnvironmentType.Ev1)

	local util = require("Util")
	--print(util)
	local  xx=	x("xx",1)
		local  xx2=	x("xx2",1)
		local  xx3=	x("xx3",1)

	--	xx:Say(66)
	delgate:Subscribe(xx,xx.Say)
		delgate:Subscribe(xx2,xx2.Say)
				delgate:Subscribe(xx3,xx3.Say)

		delgate:UnSubscribe(xx2,xx2.Say)


end
function Dispose()
	CS.IFramework.Framework.UnBindEnvUpdate(Update, CS.IFramework.EnvironmentType.Ev1)
		print("LuaDispose")
end
function Update( )
	if (CS.UnityEngine.Input.GetKeyDown(CS.UnityEngine.KeyCode.Space)) then 
			delgate:Invoke(CS.IFramework.Framework.env1.deltaTime:ToString())
	end
end




